user             www www;
worker_processes 1;
error_log        /wx_ddq/logs/nginx/error.log;
error_log        /wx_ddq/logs/nginx/error.log notice;
error_log        /wx_ddq/logs/nginx/error.log info;
pid              /wx_ddq/logs/nginx/nginx.pid;
events {
    worker_connections 1024;
}
http {
    include            mime.types;
    default_type       application/octet-stream;
    log_format main    '$remote_addr - $remote_user [$time_local] "$request" '
                       '$status $body_bytes_sent "$http_referer" '
                       '"$http_user_agent" "$http_x_forwarded_for"';
    access_log         /wx_ddq/logs/nginx/access.log main;
    error_log          /wx_ddq/logs/nginx/error.log;
    sendfile           on;
    keepalive_timeout  65;
    server {
        listen      80;
        #server_name 192.168.1.180;
        root        /wx_ddq/web_root;
        index       index.html index.php;
        access_log  /wx_ddq/logs/nginx/access.log main;
        error_log   /wx_ddq/logs/nginx/error.log;
        location ~* \.(ico|css|js|gif|jpe?g|png)(\?[0-9]+)?$ {
            expires       max;
            log_not_found off;
        }
        location / {
            if (-f $request_filename) {
                expires max;
                break;
            }
            if (!-e $request_filename) {
                rewrite ^/(.*)$ /index.php/$1 last;
            }
        }
        location /index.php {
            fastcgi_pass            127.0.0.1:9000;
            fastcgi_split_path_info ^(.+\.php)(.*)$;

            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_path_info;
            fastcgi_param CI_ENV development;

            include fastcgi_params;
        }
    }
}